# 串口调试功能使用说明

## 概述
本系统集成了完整的串口调试功能，通过USART3接口（PC10/PC11）输出调试信息，波特率115200，用于开发调试和系统状态监控。

## 硬件连接
- **调试串口**: USART3
- **发送引脚**: PC10 (TX)
- **接收引脚**: PC11 (RX)
- **波特率**: 115200
- **数据位**: 8
- **停止位**: 1
- **校验位**: 无

## 调试级别
系统支持4个调试级别：
- **ERROR**: 错误信息（最高优先级）
- **WARN**: 警告信息
- **INFO**: 一般信息
- **DEBUG**: 调试信息（最低优先级）

## 主要功能

### 1. 基础调试输出
```c
// 初始化调试功能
Debug_Init();

// 格式化输出调试信息
Debug_Printf(DEBUG_LEVEL_INFO, "系统启动完成");
Debug_Printf(DEBUG_LEVEL_DEBUG, "温度值: %.1f°C", temperature);

// 发送简单消息
Debug_SendMessage("这是一条测试消息");

// 发送十六进制数据
uint8_t data[] = {0x01, 0x02, 0x03};
Debug_SendHex(data, 3);
```

### 2. 系统状态监控
```c
// 输出系统信息
Debug_PrintSystemInfo();

// 输出GPIO状态
Debug_PrintGPIOStatus();

// 输出温度信息
Debug_PrintTemperatureInfo(temp1, temp2, temp3);

// 输出继电器状态
Debug_PrintRelayStatus();

// 输出错误信息
Debug_PrintErrorInfo("温度异常", "NTC1温度超过60°C");
```

### 3. 调试信息格式
调试输出格式：`[时间戳][级别] 消息内容`

示例：
```
[00012345][INFO ] 系统初始化完成
[00012500][DEBUG] GPIO状态: K1_EN=1, K2_EN=1, K3_EN=1
[00012600][WARN ] 这是一条警告信息测试
[00012700][ERROR] 错误信息 [温度异常]: NTC1温度超过60°C
```

## 使用步骤

### 1. 硬件准备
1. 连接USB转串口模块到PC10(TX)和PC11(RX)
2. 设置串口调试工具：115200-8-N-1
3. 上电启动系统

### 2. 查看调试信息
系统启动后会自动输出：
- 系统初始化信息
- 硬件配置信息
- GPIO状态检查
- 继电器状态检查
- 主循环运行状态

### 3. 实时监控
- 每5秒输出主循环计数
- 每50秒输出详细GPIO状态
- 实时输出错误和警告信息
- 系统异常时输出错误详情

## 调试技巧

### 1. 问题定位
- 使用ERROR级别输出关键错误信息
- 使用WARN级别输出异常状态警告
- 使用INFO级别输出系统状态变化
- 使用DEBUG级别输出详细调试信息

### 2. 性能监控
- 监控主循环执行频率
- 检查GPIO状态变化
- 观察继电器动作时序
- 跟踪温度变化趋势

### 3. 故障排查
1. 检查系统初始化信息是否正常
2. 观察GPIO状态是否符合预期
3. 监控继电器动作是否正确
4. 查看错误信息确定故障原因

## 注意事项
1. 调试功能会占用一定的CPU资源，在最终产品中可以通过宏定义关闭
2. 调试缓冲区大小为256字节，超长消息会被截断
3. 串口发送超时时间为1000ms，避免系统阻塞
4. 在中断服务程序中使用调试功能时要注意时序问题

## 扩展功能
后续可以根据需要添加：
- 调试命令解析功能
- 远程参数设置功能
- 数据记录和回放功能
- 网络调试接口功能 