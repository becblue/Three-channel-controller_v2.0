# 串口调试配置说明

## 问题分析

您看到的乱码"◆"字符是因为串口通信配置不匹配导致的。

## 正确的串口配置

### 硬件连接
- **调试串口**: USART3
- **引脚**: PC10(TX), PC11(RX)
- **连接**: 使用USB转TTL模块连接到PC

### 串口助手配置参数
```
端口号: 根据您的USB转TTL模块确定（如COM3, COM4等）
波特率: 115200
数据位: 8
停止位: 1
校验位: 无(None)
流控制: 无(None)
```

### 重要提醒
1. **波特率必须设置为115200** - 这是最关键的参数
2. **数据位必须是8位**
3. **停止位必须是1位**
4. **校验位必须是无**

## 常见串口助手软件配置

### 1. 串口调试助手
- 波特率: 115200
- 数据位: 8
- 停止位: 1
- 校验: 无
- 十六进制显示: 关闭
- 自动换行: 开启

### 2. PuTTY配置
- Speed: 115200
- Data bits: 8
- Stop bits: 1
- Parity: None
- Flow control: None

### 3. 超级终端配置
- 每秒位数: 115200
- 数据位: 8
- 奇偶校验: 无
- 停止位: 1
- 数据流控制: 无

## 故障排除

### 如果仍然显示乱码
1. **检查波特率**: 确保串口助手波特率设置为115200
2. **检查连线**: 确认TX/RX连接正确（交叉连接）
3. **检查电源**: 确认USB转TTL模块供电正常
4. **检查驱动**: 确认USB转TTL驱动安装正确

### 如果没有任何输出
1. **检查端口**: 确认选择了正确的COM端口
2. **检查连接**: 确认硬件连接牢固
3. **重启设备**: 重新上电STM32开发板

## 预期输出内容

正确配置后，您应该看到类似以下的输出：
```
=== 三通道切换箱控制系统调试启动 ===
[00000123][INFO ] === 系统启动 ===
[00000125][INFO ] STM32F103RCT6 三通道高压切换箱控制系统
[00000127][INFO ] 版本: v2.0
[00000129][INFO ] 编译时间: Dec 29 2024 20:22:15
[00000131][INFO ] === 初始化GPIO功能模块 ===
[00000133][INFO ] 继电器初始化开始
[00000135][INFO ] 继电器初始状态:
[00000137][INFO ]   通道1: 断开
[00000139][INFO ]   通道2: 断开
[00000141][INFO ]   通道3: 断开
[00000143][INFO ] 继电器初始化完成
[00000145][INFO ] GPIO中断系统初始化完成
[00000147][INFO ] GPIO状态监控系统初始化完成
[00000149][INFO ] GPIO功能模块初始化完成
[00000151][INFO ] 系统信息:
[00000153][INFO ]   MCU: STM32F103RCT6
[00000155][INFO ]   系统时钟: 72 MHz
[00000157][INFO ]   固件版本: v2.0
[00000159][INFO ]   编译时间: Dec 29 2024 20:22:15
[00000161][INFO ] 进入主循环，开始GPIO功能测试
[00005161][INFO ] 主循环计数: 1
[00010161][INFO ] 主循环计数: 2
```

## 修复措施

我已经修复了代码中的问题：
- ? 添加了`Debug_Init()`调用
- ? 确保调试系统在使用前正确初始化

请重新编译并下载程序，然后按照上述配置设置您的串口助手。 